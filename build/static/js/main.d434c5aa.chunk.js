(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,n){},116:function(e,n){},118:function(e,n){},126:function(e,n,t){},131:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(29),c=t.n(o),l=(t(69),t(70),t(62)),i=t(1),u=t(63),s=t(14),d=t(58),m=t.n(d),f=t(30),g=t.n(f),b=t(15);t(126);function p(){var e=Object(s.a)(["\n    height:50%;\n    width: 100%;\n    border: 1px solid black;\n"]);return p=function(){return e},e}function v(){var e=Object(s.a)(["\n    flex: 1;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"]);return v=function(){return e},e}function y(){var e=Object(s.a)(["\n    width: 40%;\n    height: 100%;\n"]);return y=function(){return e},e}function h(){var e=Object(s.a)(["\n    background-color:black;\n    display: flex;\n    width: 100%;\n    height: 100vh;\n    flex-direction: row;\n"]);return h=function(){return e},e}function E(){var e=Object(s.a)(["\n    \n    color:white;\n    background: transparent;\n    border: none;\n    border-bottom: 1px solid white;\n"]);return E=function(){return e},e}var w=b.a.input(E()),k=(b.a.div(h()),b.a.div(y()),b.a.div(v()),b.a.video(p())),O=function(e){var n,t=Object(r.useRef)(),o=Object(r.useRef)(),c=Object(r.useRef)(),l=Object(r.useRef)(),i=Object(r.useRef)(),s=Object(r.useState)(""),d=Object(u.a)(s,2),f=d[0],b=d[1];function p(e){if(console.log("inside fun"),3!=e.data)1==e.data?(e.target.getCurrentTime()-n>1&&j(e.target.getCurrentTime()),l.current.send(JSON.stringify({type:"play"})),i.current.playVideo()):2==e.data&&(l.current.send(JSON.stringify({type:"pause"})),i.current.pauseVideo());else{var t=e.target.getCurrentTime();Math.abs(n-t)>1&&(console.log("seek"),j(t)),n=t,e.data}}function v(){var e=new window.YT.Player("player",{height:"390",width:"640",playerVars:{autoplay:0,controls:1,rel:0,fs:1},events:{onStateChange:p}});i.current=e}function y(e){c.current.srcObject=e}function h(e){var n=JSON.parse(e);"newVideo"===n.type?-1==n.data.indexOf("=")?(i.current.loadVideoById(n.data.split(".be/")[1]),console.log(n.data.split(".be/")[1])):i.current.loadVideoById(n.data.split("=")[1]):"pause"===n.type?i.current.pauseVideo():("play"==n.type||i.current.seekTo(n.data,!0),i.current.playVideo())}Object(r.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(n){o.current.srcObject=n,t.current=m.a.connect("/"),t.current.emit("join room",e.match.params.roomID),t.current.on("other user",(function(e){console.log("creator"),e&&(console.log("partner"),l.current=E(e,t.current.id,n))})),t.current.on("caller signal",(function(e){console.log("Caller signal from browser"),l.current=O(e.CallerID,e.signal,n)})),t.current.on("callee signal",(function(e){console.log("callee signal from browser"),l.current.once("error",(function(e){console.log("Warning"+e)})),l.current.signal(e.signal)}))}))}),[]),Object(r.useEffect)((function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n),window.onYouTubeIframeAPIReady=v}),[]);var E=function(e,n,r){var a=new g.a({initiator:!0,trickle:!1,stream:r,config:{iceServers:[{url:"stun:stun1.l.google.com:19302"},{url:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]}});return a.on("signal",(function(r){var a={PartnerID:e,CallerID:n,signal:r};t.current.emit("call partner",a)})),a.on("stream",y),a.on("data",h),a},O=function(e,n,r){console.log("inside addpeer");var a=new g.a({initiator:!1,trickle:!1,stream:r,config:{iceServers:[{url:"stun:stun1.l.google.com:19302"},{url:"turn:numb.viagenie.ca",credential:"muazkh",username:"webrtc@live.com"}]}});return a.on("signal",(function(n){console.log("inside peer");var r={CallerID:e,signal:n};t.current.emit("accept call",r)})),a.once("error",(function(e){console.log("peer error"+e)})),a.on("stream",y),a.on("data",h),a.signal(n),a};function j(e){l.current.send(JSON.stringify({type:"seek",data:e})),console.log(e)}return a.a.createElement("div",null,a.a.createElement("nav",{className:"navbar",style:{height:"50px",backgroundColor:"red"}},a.a.createElement("h4",{style:{color:"black"}},a.a.createElement("i",{className:"youtube icon large"}),"Youtube Party")),a.a.createElement("div",{className:"container mt-5"},a.a.createElement("br",null),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-12 col-lg-6"},a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"ui inverted segment fluid",id:"player"})),a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"ui inverted segment",style:{backgroundColor:"black"}},a.a.createElement(w,{type:"text",placeholder:"Video link",value:f,onChange:function(e){return b(e.target.value)}}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("button",{style:{color:"black"},className:"ui red button",onClick:function(){l.current.send(JSON.stringify({type:"newVideo",data:f})),-1==f.indexOf("=")?(i.current.loadVideoById(f.split(".be/")[1]),console.log(f.split(".be/")[1])):i.current.loadVideoById(f.split("=")[1])}},"Load Video")))),a.a.createElement("div",{className:"col-lg-1"}),a.a.createElement("div",{className:"col-12 col-lg-5"},a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement(k,{controls:!0,autoPlay:!0,ref:c})),a.a.createElement("br",null),a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement(k,{muted:!0,controls:!0,autoPlay:!0,ref:o})),a.a.createElement("br",null)))))},j=t(133),N=function(e){return a.a.createElement("div",{className:"d-flex justify-content-center mt-5"},a.a.createElement("button",{style:{color:"black"},className:"ui red button",onClick:function(){var n=Object(j.a)();e.history.push("/room/".concat(n))}},"Create room"))},x=function(e){return a.a.createElement(l.a,null,a.a.createElement(i.c,null,a.a.createElement(i.a,{path:"/",exact:!0,component:N}),a.a.createElement(i.a,{path:"/room/:roomID",component:O})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,n,t){e.exports=t(131)},70:function(e,n,t){}},[[64,1,2]]]);
//# sourceMappingURL=main.d434c5aa.chunk.js.map